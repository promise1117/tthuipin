{include file="./public/head" /}
<style type="text/css">
    .layui-form-label{
        width: 90px;
        font-size: 13px;
        font-weight: 600;
        text-align: left;
    }
    .layui-input-block {
        margin-left: 120px;
        min-height: 36px;
    }
</style>
<body>
<div class="layui-fluid">
    <div class="layui-row">
        <form class="layui-form" id="LAY-component-form-setval" lay-filter="example">

            <div class="layui-form-item">

                <label for="username" class="layui-form-label">
                    <span class="x-red">*</span>主产品编号
                </label>

                <div class="layui-input-block">

                    <input type="text" id="goods_no" name="goods_no" value="{$number}" readonly lay-verify="required"
                           autocomplete="off" class="layui-input" placeholder="请输入主产品编号">
                </div>

            </div>

            <div class="layui-form-item">
                <div class="layui-inline">
                    <label class="layui-form-label"><span class="x-red">*</span>所属分类</label>
                    <div class="layui-input-inline">
                        <select name="categoryid">
                            <option value="0">请选择主产品所属分类</option>
                            {volist name="categorylsit" id="v"}
                            <optgroup label="{$v.cat_name}"></optgroup>
                            <!--<option value="{$v.cat_id}">{$v.cat_name}</option>-->
                            {volist name="elist" id="vv"}
                            {if $v.cat_id == $vv.parent_id}
                            <!--<optgroup label="——{$vv.cat_name}"></optgroup>-->
                            <option value="{$vv.cat_id}">——{$vv.cat_name}</option>
                            {/if}
                            {/volist}
                            {/volist}
                        </select>
                    </div>
                    <div class="layui-form-mid layui-word-aux">
                        <span class="x-red">*</span>默认一级分类
                    </div>
                </div>
            </div>
            <div class="layui-form-item">

                <label for="username" class="layui-form-label">
                    <span class="x-red">*</span>主产品名称
                </label>
                <div class="layui-input-block">
                    <input type="text" id="name" name="name" required="" lay-verify="required"
                           autocomplete="off" class="layui-input" placeholder="请输入主产品名称">
                    <!-- <input type="text" id="title" name="title" required="" lay-verify="required"
                           autocomplete="off" class="layui-input"> -->
                </div>

            </div>

            <div class="layui-form-item" style="display: none;">

                <label for="custom_name" class="layui-form-label">
                    <span class="x-red">*</span>自定义名称
                </label>
                <div class="layui-input-inline">
                    <input type="text" id="custom_name" name="custom_name" autocomplete="off" class="layui-input">
                    <!-- <input type="text" id="title" name="title" required="" lay-verify="required"
                           autocomplete="off" class="layui-input"> -->
                </div>
                <div class="layui-form-mid layui-word-aux">
                    <span class="x-red">*</span>自定义产品名称<!-- <br />
                          <span class="x-red">*</span>顶部标题 -->
                </div>
            </div>
            <div class="layui-form-item">
                <label for="content" class="layui-form-label">
                    <span class="x-red">*</span>关键词
                </label>
                <div class="layui-input-block">
                    <!--                            <textarea placeholder="请输入商品关键词" class="layui-textarea" name="keywords"></textarea>-->
                    <input type="text" id="" name="keywords" value="" placeholder="请输入商品关键词" autocomplete="off" class="layui-input">
                </div>
<!--                <div class="layui-form-mid layui-word-aux">-->
<!--                    <span class="x-red">*</span>换行加英文状态的‘,’ 逗号，最多六行,最后一行不加符号-->
<!--                </div>-->
            </div>
            <div class="layui-form-item">
                <label for="content" class="layui-form-label">
                    <span class="x-red">*</span>进货链接
                </label>
                <div class="layui-input-block">
                    <!--                                <textarea placeholder="请输入商品的进货链接" class="layui-textarea" name="search_words"></textarea>-->
                    <input type="text" id="" name="search_words" value="" placeholder="请输入商品的进货链接" autocomplete="off" class="layui-input">
                </div>

            </div>

            <div class="layui-form-item">
                <label for="content" class="layui-form-label">
                    <span class="x-red">*</span>推荐语
                </label>
                <div class="layui-input-block">
                    <textarea placeholder="请输入产品推荐语字数不限" class="layui-textarea" name="content"></textarea>
                </div>

            </div>
            <div class="layui-form-item" style="display: none">
                <label for="content" class="layui-form-label">
                    <span class="x-red">*</span>猜你喜欢
                </label>
                <div class="layui-form-item layui-form-text">
                    <div class="layui-input-block">
                        <textarea placeholder="请输入商品id" class="layui-textarea" name="like"></textarea>
                    </div>
                </div>
                <div class="layui-form-mid layui-word-aux">
                    <span class="x-red">*</span>喜欢的产品id，以英文的‘,’逗号分隔
                </div>
            </div>
            <div class="layui-form-item">
                <label for="username" class="layui-form-label">
                    <span class="x-red">*</span>主产品展示图
                </label>
                <div class="layui-input-inline">
                    <input type="hidden" id="headimg" name="filedan" value="" required="" autocomplete="off" class="layui-input">
                    <div class="layui-upload">
                        <button type="button" class="layui-btn" id="test1">上传图片</button>
                        <div class="layui-upload-list">
                            <img class="layui-upload-img" id="demo1"  width="120px" height="120px">
                            <p id="demoText"></p>
                        </div>
                    </div>
                </div>
                <div class="layui-form-mid layui-word-aux" style="margin-left: -100px;">
                    <span class="x-red">*</span>主产品展示图（建议尺寸：400*400px；单张）
                </div>
            </div>
            <div class="layui-form-item">
                <label for="username" class="layui-form-label">
                    <span class="x-red">*</span>主产品banner图
                </label>
                <div class="layui-upload">
                    <button type="button" class="layui-btn layui-btn-normal" id="testListb"  style="float: left;">请选择图片/视频</button>
                    <div class="layui-form-mid layui-word-aux" style="margin-left: 10px;">
                        <span class="x-red">*</span>详情页banner图片/视频 支持jpg/gif/png/mp4格式（建议尺寸：400*400px；多张）
                    </div>
                    <button type="button" class="layui-btn" id="testListActionb" style="float: right;margin-right:12px;" >开始上传</button>
                    <span class="num_picb" style="float: right;margin: 8px;"></span>

                    <div class="layui-upload-list">
                        <table class="layui-table">
                            <thead>
                            <tr>
                                <th>文件名</th>
                                <th id="picb">图片预览</th>
                                <th>大小</th>
                                <th>状态</th>
                                <th id="caob">操作</th>
                            </tr>
                            </thead>
                            <tbody id="demoListb"></tbody>
                        </table>
                    </div>

                </div>
            </div>
            <div class="layui-form-item">
                <label for="username" class="layui-form-label">
                    <span class="x-red">*</span>主产品详情图
                </label>
                <div class="layui-upload">
                    <button type="button" class="layui-btn layui-btn-normal" id="testList" style="float: left;">请选择图片/视频</button>
                    <div class="layui-form-mid layui-word-aux" style="margin-left: 10px;">
                        <span class="x-red">*</span>产品介绍详情图片/视频 支持jpg/gif/png/mp4格式，多张（宽≥750px，高度不限）
                    </div>
                    <button type="button" class="layui-btn" id="testListAction" style="float: right;margin-right:12px;">开始上传</button>
                    <span class="num_pic" style="float: right;margin: 8px;"></span>
                    <div class="layui-upload-list">
                        <table class="layui-table">
                            <thead>
                            <tr>
                                <th>文件名</th>
                                <th id="pic">图片预览</th>
                                <th>大小</th>
                                <th>状态</th>
                                <th id="cao">操作</th>
                            </tr>
                            </thead>
                            <tbody id="demoList"></tbody>
                        </table>
                    </div>

                </div>

            </div>
            <div class="layui-form-item">
                <label for="uptime" class="layui-form-label">
                    <span class="x-red">*</span>产品日期
                </label>
                <div class="layui-inline">
                    <div class="layui-input-inline" title="上架日期">
                        <input type="text" class="layui-input" id="test11" name="up_time"  placeholder="请选择上架日期">
                        <svg style="position: absolute; top: 6%; right: 2%;z-index: 0;" t="1591607679625" class="icon" viewBox="0 0 1024 1024"
                             version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="25638" width="30" height="30">
                            <path d="M512 1024A512 512 0 1 1 512 0a512 512 0 0 1 0 1024z m0-78.774857A433.225143 433.225143 0 1 0 512 78.774857a433.225143 433.225143 0 0 0 0 866.450286z m0-393.874286h236.251429a39.424 39.424 0 0 1 0 78.774857H472.649143a39.350857 39.350857 0 0 1-39.350857-39.350857V236.251429A39.350857 39.350857 0 1 1 512 236.251429v315.026285z"
                                  p-id="25639" fill="#707070"></path>
                        </svg>
                    </div>
                    <div class="layui-form-mid layui-word-aux">
                        ——
                    </div>
                    <div class="layui-input-inline" title="下架日期">
                        <input type="text" class="layui-input" id="test12" name="down_time" placeholder="请选择下架日期">
                        <svg style="position: absolute; top: 6%; right: 2%;z-index: 0;" t="1591607679625" class="icon" viewBox="0 0 1024 1024"
                             version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="25638" width="30" height="30">
                            <path d="M512 1024A512 512 0 1 1 512 0a512 512 0 0 1 0 1024z m0-78.774857A433.225143 433.225143 0 1 0 512 78.774857a433.225143 433.225143 0 0 0 0 866.450286z m0-393.874286h236.251429a39.424 39.424 0 0 1 0 78.774857H472.649143a39.350857 39.350857 0 0 1-39.350857-39.350857V236.251429A39.350857 39.350857 0 1 1 512 236.251429v315.026285z"
                                  p-id="25639" fill="#707070"></path>
                        </svg>
                    </div>
                </div>
            </div>

            <div class="layui-form-item df">
                <div class="layui-form-item">
                    <label for="username" class="layui-form-label">
                        <span class="x-red">*</span>销售价(NT$)
                    </label>
                    <div class="layui-input-inline">
                        <input type="text" id="sell_price" name="sell_price" value="" autocomplete="off" class="layui-input"
                               placeholder="请输入售价">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label for="username" class="layui-form-label">
                        <span class="x-red">*</span>市场价(NT$)
                    </label>
                    <div class="layui-input-inline">
                        <input type="text" id="market_price" name="market_price" value="" autocomplete="off" class="layui-input"
                               placeholder="请输入原价">
                    </div>
                </div>
            </div>

            <div class="layui-form-item df">
                <div class="layui-form-item">
                    <label for="store_nums" class="layui-form-label">
                        <span class="x-red">*</span>库存数量
                    </label>
                    <div class="layui-input-inline">
                        <input type="text" id="store_nums" name="store_nums" value="" autocomplete="off" class="layui-input"
                               placeholder="请输入库存数量">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label for="store_nums" class="layui-form-label">
                        <span class="x-red">*</span>产品销量
                    </label>
                    <div class="layui-input-inline">
                        <input type="text" id="sale" name="sale" value="200" autocomplete="off" class="layui-input" placeholder="请输入产品销量">
                    </div>
                </div>
            </div>
            <div class="layui-form-item df">
                <div class="layui-form-item">
                    <label for="store_nums" class="layui-form-label">
                        <span class="x-red">*</span>产品浏览量
                    </label>
                    <div class="layui-input-inline">
                        <input type="text" id="visit" name="visit" value="100" autocomplete="off" class="layui-input" placeholder="请输入产品浏览量">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label for="username" class="layui-form-label">
                        <span class="x-red">*</span>产品排序
                    </label>
                    <div class="layui-input-inline">
                        <input type="text" id="sort" name="sort" value="0" autocomplete="off" class="layui-input" placeholder="数字越大越往前">
                    </div>
                </div>

            </div>

            <div class="layui-form-item">
                <label class="layui-form-label">支持条件</label>
                <div class="layui-input-block">
                    <input type="checkbox" name="nooff[]" value="1" title="免运费" checked>
                    <input type="checkbox" name="nooff[]" value="2" title="七天鉴赏期" checked>
                    <input type="checkbox" name="nooff[]" value="3" title="支持711商家取货" checked>
                    <input type="checkbox" name="nooff[]" value="4" title=" 支持全家取貨" checked>
                </div>
            </div>
            <div class="layui-form-item" style="display: none;">
                <label class="layui-form-label">是否推荐</label>
                <div class="layui-input-block">
                    <input type="radio" name="index" value="0" title="非推薦" checked="">
                    <input type="radio" name="index" value="1" title="推薦">

                </div>
            </div>
            <div class="layui-form-item df">
                <div class="layui-form-item">
                    <label class="layui-form-label">是否新品</label>
                    <div class="layui-input-block">
                        <input type="radio" name="new" value="0" title="非新品" checked="">
                        <input type="radio" name="new" value="1" title="新品">

                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label">是否特賣</label>
                    <div class="layui-input-block">
                        <input type="radio" name="special" value="0" title="非特賣" checked="">
                        <input type="radio" name="special" value="1" title="特賣">

                    </div>
                </div>
            </div>

            <div class="layui-form-item df">
                <div class="layui-form-item">
                    <label class="layui-form-label">是否推荐</label>
                    <div class="layui-input-block">
                        <input type="radio" name="hot" value="0" title="非推荐" checked="">
                        <input type="radio" name="hot" value="1" title="推荐">

                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">产品状态</label>
                    <div class="layui-input-block">
                        <input type="radio" name="is_del" value="0" title="正常" checked="">
                        <input type="radio" name="is_del" value="2" title="下架">

                    </div>
                </div>
            </div>


            <div class="layui-form-item">
                <label for="L_repass" class="layui-form-label"></label>
                <button  class="layui-btn  layui-btn-lg" lay-filter="add" lay-submit=""  style="width: 120px; margin-left: 6%;">
                    提交
                </button>
            </div>
        </form>
    </div>
</div>
<script>
    layui.use('laydate', function() {
        var laydate = layui.laydate;
        laydate.render({
            elem: '#test11'
            , format: 'yyyy-MM-dd'
        });
        laydate.render({
            elem: '#test12'
            , format: 'yyyy-MM-dd'
        });
    });
    layui.use(['form', 'layer'],
        function() {
            $ = layui.jquery;
            var form = layui.form,
                layer = layui.layer;

            //监听提交
            form.on('submit(add)',
                function(data) {
                    // console.log(data.field);return ;
                    //发异步，把数据提交给php
                    $.ajax({
                        url:'/vgoodsadd',
                        type:'post',
                        data:data.field,
                        success:function(data) {
                            // console.log(data);return;
                            if(data.code =="200" ){
                                // console.log(data.data);return ;
                                // view("添加成功！");
                                layer.alert("增加成功", {
                                        icon: 6
                                    },
                                    function() {
                                        //关闭当前frame
                                        xadmin.close();

                                        // 可以对父窗口进行刷新
                                        xadmin.father_reload();
                                    });
                                // window.location.reload();

                            }else{
                                alert(data.message);
                                // view(data.msg);
                            }
                        },
                        error : function() {
                            // view("异常！");
                            alert("异常！");
                        }
                    });
                    return false;
                });

        });
</script>
<script>
    layui.use('upload', function(){
        var $ = layui.jquery
            ,upload = layui.upload;

        //普通图片上传
        var uploadInst = upload.render({
            elem: '#test1'
            ,url: '/vupload'
            ,before: function(obj){
                //预读本地文件示例，不支持ie8
                obj.preview(function(index, file, result){
                    $('#demo1').attr('src', result); //图片链接（base64）
                });
            }
            ,done: function(res){
                if(res.code == 200){
                    $('#headimg').val(res.data);
                }
                // console.log(res.data);
                // return ;
                //如果上传失败
                if(res.code == 100){
                    return layer.msg('上传失败');
                }
                //上传成功
            }
            ,error: function(){
                //演示失败状态，并实现重传
                var demoText = $('#demoText');
                demoText.html('<span style="color: #FF5722;">上传失败</span> <a class="layui-btn layui-btn-xs demo-reload">重试</a>');
                demoText.find('.demo-reload').on('click', function(){
                    uploadInst.upload();
                });
            }
        });
        //多图片上传
        upload.render({
            elem: '#test2'
            ,url: '/vupload'
            ,multiple: true
            ,before: function(obj){
                //预读本地文件示例，不支持ie8
                obj.preview(function(index, file, result){
                    $('#demo2').append('<img src="'+ result +'" alt="'+ file.name +'" class="layui-upload-img"  width="120px" height="120px">')
                });
            }
            ,done: function(res){
                //上传完毕
                if(res.code == 200){
                    var str = "";
                    arr.each(function () {
                        str += res.data + ";"; //str += $(this).name.val() + ",";
                    });
                    //去掉最后一个逗号(如果不需要去掉，就不用写)
                    if (str.length > 0) {
                        str = str.substr(0,str.length - 1);
                    }
                    console.log(str);return ;
                    $('#headimgs').val(str);
                }
                // console.log(res.data);
                // return ;
                //如果上传失败
                if(res.code == 100){
                    return layer.msg('上传失败');
                }
            }
            ,error: function(){
                //演示失败状态，并实现重传
                var demoText = $('#demoText2');
                demoText.html('<span style="color: #FF5722;">上传失败</span> <a class="layui-btn layui-btn-xs demo-reload">重试</a>');
                demoText.find('.demo-reload').on('click', function(){
                    uploadInst.upload();
                });
            }
        });
    });
</script>
<script type="text/javascript">
    layui.use('upload', function() {
        var $ = layui.jquery,
            upload = layui.upload;
        //多文件列表示例
        var demoListView = $('#demoList'),
            uploadListIns = upload.render({
                elem: '#testList',
                url: "/vuploads",
                accept: 'file',
                // acceptMime: 'image/*',
                size: 81920,
                multiple: true,
                number: 400,
                auto: false,
                // exts: 'jpg|png|jpeg|gif',
                bindAction: '#testListAction',
                choose: function(obj) {
                    var files = this.files = obj.pushFile(); //将每次选择的文件追加到文件队列
                    //读取本地文件
                    obj.preview(function(index, file, result) {
                        var is_image = /jpg|png|jpeg|gif/.test(file.name.substring(file.name.indexOf('.')+1));
                        if(is_image){
                            var tr = $(['<tr id="upload-' + index + '">', '<td>' + file.name + '</td>', '<td><img src="' + result + '" alt="' + file.name + '" style="width: 100px;height: 100px;"></td>', '<td>' + (file.size / 1014).toFixed(1) + 'kb</td>', '<td>等待上传</td>', '<td>', '<button class="layui-btn layui-btn-xs demo-reload layui-hide">重传</button>', '<button class="layui-btn layui-btn-xs layui-btn-danger demo-delete">删除</button>', '</td>', '</tr>'].join(''));

                        }else {
                            var tr = $(['<tr id="upload-' + index + '">', '<td>' + file.name + '</td>', '<td><video controls style="width: 100px;height: 100px;"><source src="' + result + '" type="video/mp4"></video></td>', '<td>' + (file.size / 1014).toFixed(1) + 'kb</td>', '<td>等待上传</td>', '<td>', '<button class="layui-btn layui-btn-xs demo-reload layui-hide">重传</button>', '<button class="layui-btn layui-btn-xs layui-btn-danger demo-delete">删除</button>', '</td>', '</tr>'].join(''));

                        }
                        //单个重传
                        tr.find('.demo-reload').on('click', function() {
                            obj.upload(index, file);
                            $("#upload-" + index).find("td").eq(2).html((file.size / 1014).toFixed(1) + 'kb');
                        });

                        //删除
                        tr.find('.demo-delete').on('click', function() {
                            delete files[index]; //删除对应的文件
                            tr.remove();
                            uploadListIns.config.elem.next()[0].value = ''; //清空 input file 值，以免删除后出现同名文件不可选
                        });

                        demoListView.append(tr);
                        $(".num_pic").text("总共【" + demoListView.find("tr").length + "】张图片");
                    });
                },

                done: function(res, index, upload) {
                    if(res.code == 200) { //上传成功
                        $("#cao").text("地址");
                        var tr = demoListView.find('tr#upload-' + index),
                            tds = tr.children();
                        tds.eq(3).html('<span style="color: #5FB878;">上传成功</span>');
                        tds.eq(4).html('<input type="text" name="files[]"  value="' + res.data + '" class="layui-input" />'); //清空操作
                        return delete this.files[index]; //删除文件队列已经上传成功的文件
                    }
                    this.error(index, upload);
                },
                allDone: function(obj) { //当文件全部被提交后，才触发
                    layer.msg("上传文件数量：【" + obj.total + "】张，上传成功：【" + obj.successful + "】张，失败：【" + obj.aborted + "】", {
                        time: 3000
                    });
                    console.log(obj.total); //得到总文件数
                    console.log(obj.successful); //请求成功的文件数
                    console.log(obj.aborted); //请求失败的文件数
                },
                error: function(index, upload) {
                    var tr = demoListView.find('tr#upload-' + index),
                        tds = tr.children();
                    tds.eq(2).html('<span style="color: #FF5722;">上传失败</span>');
                    tds.eq(4).find('.demo-reload').removeClass('layui-hide'); //显示重传
                }
            });

    });
</script>
<script type="text/javascript">
    layui.use('upload', function() {
        var $ = layui.jquery,
            upload = layui.upload;
        //多文件列表示例
        var demoListView = $('#demoListb'),
            uploadListIns = upload.render({
                elem: '#testListb',
                url: "/vuploads",
                accept: 'file',
                // acceptMime: 'image/*',
                size: 81920,
                multiple: true,
                number: 400,
                auto: false,
                // exts: 'jpg|png|jpeg|gif',
                bindAction: '#testListActionb',
                choose: function(obj) {
                    var files = this.files = obj.pushFile(); //将每次选择的文件追加到文件队列
                    //读取本地文件
                    obj.preview(function(index, file, result) {
                        var is_image = /jpg|png|jpeg|gif/.test(file.name.substring(file.name.indexOf('.')+1));
                        if(is_image){
                            var tr = $(['<tr id="uploadb-' + index + '">', '<td>' + file.name + '</td>', '<td><img src="' + result + '" alt="' + file.name + '" style="width: 100px;height: 100px;"></td>', '<td>' + (file.size / 1014).toFixed(1) + 'kb</td>', '<td>等待上传</td>', '<td>', '<button class="layui-btn layui-btn-xs demo-reloadb layui-hide">重传</button>', '<button class="layui-btn layui-btn-xs layui-btn-danger demo-deleteb">删除</button>', '</td>', '</tr>'].join(''));
                        }else {
                            var tr = $(['<tr id="uploadb-' + index + '">', '<td>' + file.name + '</td>', '<td><video controls style="width: 100px;height: 100px;"><source src="' + result + '" type="video/mp4"></video></td>', '<td>' + (file.size / 1014).toFixed(1) + 'kb</td>', '<td>等待上传</td>', '<td>', '<button class="layui-btn layui-btn-xs demo-reloadb layui-hide">重传</button>', '<button class="layui-btn layui-btn-xs layui-btn-danger demo-deleteb">删除</button>', '</td>', '</tr>'].join(''));

                        }
                        //单个重传
                        tr.find('.demo-reloadb').on('click', function() {
                            obj.upload(index, file);
                            $("#uploadb-" + index).find("td").eq(2).html((file.size / 1014).toFixed(1) + 'kb');
                        });

                        //删除
                        tr.find('.demo-deleteb').on('click', function() {
                            delete files[index]; //删除对应的文件
                            tr.remove();
                            uploadListIns.config.elem.next()[0].value = ''; //清空 input file 值，以免删除后出现同名文件不可选
                        });

                        demoListView.append(tr);
                        $(".num_picb").text("总共【" + demoListView.find("tr").length + "】张图片");
                    });
                },

                done: function(res, index, upload) {
                    if(res.code == 200) { //上传成功
                        $("#cao").text("地址");
                        var tr = demoListView.find('tr#uploadb-' + index),
                            tds = tr.children();
                        tds.eq(3).html('<span style="color: #5FB878;">上传成功</span>');
                        tds.eq(4).html('<input type="text" name="filesb[]"  value="' + res.data + '" class="layui-input" />'); //清空操作
                        return delete this.files[index]; //删除文件队列已经上传成功的文件
                    }
                    this.error(index, upload);
                },
                allDone: function(obj) { //当文件全部被提交后，才触发
                    layer.msg("上传文件数量：【" + obj.total + "】张，上传成功：【" + obj.successful + "】张，失败：【" + obj.aborted + "】", {
                        time: 3000
                    });
                    console.log(obj.total); //得到总文件数
                    console.log(obj.successful); //请求成功的文件数
                    console.log(obj.aborted); //请求失败的文件数
                },
                error: function(index, upload) {
                    var tr = demoListView.find('tr#uploadb-' + index),
                        tds = tr.children();
                    tds.eq(2).html('<span style="color: #FF5722;">上传失败</span>');
                    tds.eq(4).find('.demo-reloadb').removeClass('layui-hide'); //显示重传
                }
            });

    });
</script>
</body>

</html>

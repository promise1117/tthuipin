(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{245:function(t,e,r){var n=r(16),o=r(42),c=r(22),l=r(246),d="["+l+"]",h=RegExp("^"+d+d+"*"),f=RegExp(d+d+"*$"),m=function(t,e,r){var o={},d=c((function(){return!!l[t]()||"​"!="​"[t]()})),h=o[t]=d?e(v):l[t];r&&(o[r]=h),n(n.P+n.F*d,"String",o)},v=m.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(h,"")),2&e&&(t=t.replace(f,"")),t};t.exports=m},246:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},251:function(t,e,r){"use strict";var n=r(9),o=r(37),c=r(45),l=r(147),d=r(82),h=r(22),f=r(63).f,m=r(83).f,v=r(21).f,I=r(245).trim,L=n.Number,x=L,y=L.prototype,$="Number"==c(r(103)(y)),_="trim"in String.prototype,P=function(t){var e=d(t,!1);if("string"==typeof e&&e.length>2){var r,n,o,c=(e=_?e.trim():I(e,3)).charCodeAt(0);if(43===c||45===c){if(88===(r=e.charCodeAt(2))||120===r)return NaN}else if(48===c){switch(e.charCodeAt(1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+e}for(var code,l=e.slice(2),i=0,h=l.length;i<h;i++)if((code=l.charCodeAt(i))<48||code>o)return NaN;return parseInt(l,n)}}return+e};if(!L(" 0o1")||!L("0b1")||L("+0x1")){L=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof L&&($?h((function(){y.valueOf.call(r)})):"Number"!=c(r))?l(new x(P(e)),r,L):P(e)};for(var T,D=r(17)?f(x):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;D.length>E;E++)o(x,T=D[E])&&!o(L,T)&&v(L,T,m(x,T));L.prototype=y,y.constructor=L,r(23)(n,"Number",L)}},255:function(t,e,r){var n=r(16),o=r(256);n(n.S+n.F*(Number.parseInt!=o),"Number",{parseInt:o})},256:function(t,e,r){var n=r(9).parseInt,o=r(245).trim,c=r(246),l=/^[-+]?0[xX]/;t.exports=8!==n(c+"08")||22!==n(c+"0x16")?function(t,e){var r=o(String(t),3);return n(r,e>>>0||(l.test(r)?16:10))}:n},298:function(t,e,r){},327:function(t,e,r){"use strict";var n=r(298);r.n(n).a},353:function(t,e,r){"use strict";r.r(e);r(84);var n=r(234),o=(r(251),r(255),r(36),r(30),r(81),r(52)),c=(r(61),r(44),r(102)),l=r(244),d=r(274),h=r(62),f=r(238),m=r(236),v=r(241),I=r(235),L={components:{NavBar:c.a,GoodsList:l.a,FilterPage:d.a},data:function(){return{swipeImgs:[],sliverpotTab:0,goodsList:[],sortType:"last",selectParams:"",loading:!1,isAllLoaded:!1,pageIndex:0,pageSize:8,classParams:[],orderBy:1,isInitLoad:!1,filterParams:[],isLoading:!1}},head:function(){return{title:"银壶",meta:[{name:"keywords",hid:"keywords",content:""},{name:"description",hid:"description",content:""}]}},watch:{$route:function(t){"shop-ironpot-type"!==t.name||this.$store.state.isFromDetail||this.initData()}},asyncData:function(t){var e,r,n,c,l,d,h,m,I,L,x;return regeneratorRuntime.async((function(y){for(;;)switch(y.prev=y.next){case 0:t.$axios,e=t.error,r=t.params,y.prev=1,y.next=19;break;case 5:if(n=y.sent,c=Object(o.a)(n,4),l=c[0],d=c[1],h=c[2],m=c[3],1!==l.Code||1!==d.Code||1!==m.Code){y.next=18;break}return I=d.Data,L=m.Data,x=Object(f.d)(l.Data.Data,v.a),y.abrupt("return",{filterParams:L,classParams:I,goodsList:x,isAllLoaded:x.length<8,sliverpotTab:Number.parseInt(r.type),pageIndex:1,isInitLoad:!0,swipeImgs:Object(f.a)(h)});case 18:return y.abrupt("return",e({statusCode:500}));case 19:y.next=30;break;case 21:if(y.prev=21,y.t0=y.catch(1),void 0!==y.t0.response){y.next=27;break}return y.abrupt("return",e({statusCode:500}));case 27:if(404===y.t0.response.status){y.next=29;break}return y.abrupt("return",e({statusCode:500}));case 29:return y.abrupt("return",e({statusCode:404}));case 30:case"end":return y.stop()}}),null,null,[[1,21]])},methods:{sortBy:function(t){this.orderBy!==t&&(this.orderBy=t,this.isAllLoaded=!1,this.pageIndex=1,this.getData())},loaderMore:function(){this.$store.state.is2Detail||!this.isInitLoad||this.isLoading||(this.pageIndex++,this.getData())},getData:function(){var t=this;try{if(this.isAllLoaded)return;this.$toast.loading({duration:0,message:"加载中...",forbidClick:!0}),this.isLoading=!0;var e=this;this.$axios.$get("".concat(I.a.GET_GOODS_LIST,"/").concat(this.sliverpotTab,"?type=").concat(m.b.YH,"&pageIndex=").concat(this.pageIndex,"&pageSize=").concat(this.pageSize,"&orderBy=").concat(this.orderBy).concat(this.selectParams)).then((function(r){1===r.Code?(t.isAllLoaded=r.Data.Data.length<t.pageSize,1===t.pageIndex?t.goodsList=Object(f.d)(r.Data.Data,v.a):t.goodsList=[].concat(Object(n.a)(e.goodsList),Object(n.a)(Object(f.d)(r.Data.Data,v.a))),t.$toast.clear(),t.loading=!1,t.isLoading=!1):(t.$toast.fail(r.Message),t.loading=!1,t.isLoading=!1)}))}catch(t){this.$toast.fail("系统错误，请稍后再试..."),this.isLoading=!1}},changeTab:function(t){this.isAllLoaded=!1,this.pageIndex=1,this.goodsList=[],this.getData()},initData:function(){var t=this;try{this.$toast.loading({duration:0,message:"加载中...",forbidClick:!0}),this.isLoading=!0;var e=this.$route.fullPath.replace(this.$route.path,"").replace("?","");this.selectParams=""===e?"":"&"+e,this.pageIndex=1,Promise.all([this.$axios.$get("".concat(I.a.GET_GOODS_LIST,"/").concat(this.sliverpotTab,"?type=").concat(m.b.YH,"&pageIndex=").concat(this.pageIndex,"&pageSize=").concat(this.pageSize,"&orderBy=").concat(this.orderBy).concat(this.selectParams)),this.$axios.$get("".concat(I.a.GET_CLASS_TYPE,"?type=").concat(m.b.YH)),this.$axios.$get("".concat(I.a.GET_BANNER,"?type=").concat(m.a.YH)),this.$axios.$get("".concat(I.a.GET_CLASS_TYPE_FILTERATE,"?type=").concat(m.b.YH))]).then((function(e){var r=Object(o.a)(e,4),n=r[0],c=r[1],l=r[2],d=r[3];1===n.Code&&1===c.Code&&1===d.Code?(t.goodsList=Object(f.d)(n.Data.Data,v.a),t.classParams=c.Data,t.swipeImgs=Object(f.a)(l),t.filterParams=d.Data,t.$toast.clear(),t.isInitLoad=!0,t.loading=!1,t.isLoading=!1,t.isAllLoaded=n.Data.Data.length<t.pageSize):(t.$toast.fail(filterData.Message||n.Message),t.loading=!1,t.isLoading=!1)}))}catch(t){this.$toast.fail("系统错误，请稍后再试..."),this.isLoading=!1}},openFilter:function(){h.a.$emit(this.$route.name+"openFilter",!0)},initFilter:function(){var t=this;try{this.$toast.loading({duration:0,message:"加载中...",forbidClick:!0});var e=this.$route.fullPath.replace(this.$route.path,"").replace("?","");this.selectParams=""===e?"":"&"+e,this.pageIndex=1,this.orderBy=1,this.$axios.$get("".concat(I.a.GET_CLASS_TYPE_FILTERATE,"?type=").concat(m.b.YH)).then((function(e){1===e.Code?(t.filterParams=e.Data,t.$toast.clear()):t.$toast.fail(filterData.Message||goodsResult.Message)}))}catch(t){this.$toast.fail("系统错误，请稍后再试...")}}},created:function(){var t=this;h.a.$on("getFilterParams",(function(e){t.isInitLoad=!1,t.isAllLoaded=!1,t.pageIndex=1,t.selectParams="",e.forEach((function(e){if(e.selectList.length>0){var r="";e.selectList.forEach((function(t){return r+=t+","})),t.selectParams+="".concat(e.strParam,"=").concat(r.substring(0,r.length-1),"&")}})),""!==t.selectParams&&(t.selectParams="&"+t.selectParams.substring(0,t.selectParams.length-1)),t.getData()}))},mounted:function(){var t=this;this.$nextTick((function(){t.sliverpotTab=Number.parseInt(t.$route.params.type),t.$store.state.isFirstBrowser?t.$store.commit("IS_FIRST_BROWSER",!1):(t.initData(),t.initFilter())}))}},x=(r(327),r(10)),component=Object(x.a)(L,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"container"},[r("nav-bar",{attrs:{title:"日本银壶"}}),t._v(" "),r("van-swipe",{attrs:{autoplay:3e3,"indicator-color":"#F02A0C"}},t._l(t.swipeImgs,(function(t,e){return r("van-swipe-item",{key:e},[r("a",{attrs:{href:t.ImgHyperlink}},[r("img",{staticStyle:{width:"100%"},attrs:{src:t.Banner,alt:""}})])])})),1),t._v(" "),r("van-sticky",[r("van-tabs",{attrs:{color:"#dd801a","title-inactive-color":"#666",background:"#fff","swipe-threshold":3},on:{change:t.changeTab},model:{value:t.sliverpotTab,callback:function(e){t.sliverpotTab=e},expression:"sliverpotTab"}},t._l(t.classParams,(function(t,e){return r("van-tab",{key:"class"+e,attrs:{name:t.ID,title:t.Name}})})),1),t._v(" "),r("div",{staticClass:"sort_container"},[r("ul",[r("li",{class:{active:1===t.orderBy},on:{click:function(e){return t.sortBy(1)}}},[r("span",[t._v("最新")])]),t._v(" "),r("li",{class:{active:2===t.orderBy},on:{click:function(e){return t.sortBy(2)}}},[r("span",[t._v("人气")])]),t._v(" "),r("li",{class:{active:""!==t.selectParams},staticStyle:{"border-left":"solid 1px #eee"},on:{click:t.openFilter}},[r("span",[t._v("筛选")]),t._v(" "),r("svg",{staticClass:"icon icon-shaixuan",attrs:{"aria-hidden":"true"}},[r("use",{attrs:{"xlink:href":"#icon-shaixuan"}})])])])])],1),t._v(" "),r("filter-page",{attrs:{filterParams:t.filterParams}}),t._v(" "),r("van-list",{attrs:{finished:t.isAllLoaded,"finished-text":"没有更多了"},on:{load:t.loaderMore},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[r("goods-list",{attrs:{goodsList:t.goodsList}})],1)],1)}),[],!1,null,"156f97c0",null);e.default=component.exports}}]);
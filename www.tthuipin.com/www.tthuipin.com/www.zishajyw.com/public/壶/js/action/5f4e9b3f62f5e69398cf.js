(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{245:function(t,e,n){var r=n(16),o=n(42),c=n(22),l=n(246),d="["+l+"]",h=RegExp("^"+d+d+"*"),f=RegExp(d+d+"*$"),m=function(t,e,n){var o={},d=c((function(){return!!l[t]()||"​"!="​"[t]()})),h=o[t]=d?e(v):l[t];n&&(o[n]=h),r(r.P+r.F*d,"String",o)},v=m.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(h,"")),2&e&&(t=t.replace(f,"")),t};t.exports=m},246:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},251:function(t,e,n){"use strict";var r=n(9),o=n(37),c=n(45),l=n(147),d=n(82),h=n(22),f=n(63).f,m=n(83).f,v=n(21).f,I=n(245).trim,L=r.Number,x=L,y=L.prototype,$="Number"==c(n(103)(y)),T="trim"in String.prototype,_=function(t){var e=d(t,!1);if("string"==typeof e&&e.length>2){var n,r,o,c=(e=T?e.trim():I(e,3)).charCodeAt(0);if(43===c||45===c){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===c){switch(e.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+e}for(var code,l=e.slice(2),i=0,h=l.length;i<h;i++)if((code=l.charCodeAt(i))<48||code>o)return NaN;return parseInt(l,r)}}return+e};if(!L(" 0o1")||!L("0b1")||L("+0x1")){L=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof L&&($?h((function(){y.valueOf.call(n)})):"Number"!=c(n))?l(new x(_(e)),n,L):_(e)};for(var P,D=n(17)?f(x):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;D.length>E;E++)o(x,P=D[E])&&!o(L,P)&&v(L,P,m(x,P));L.prototype=y,y.constructor=L,n(23)(r,"Number",L)}},255:function(t,e,n){var r=n(16),o=n(256);r(r.S+r.F*(Number.parseInt!=o),"Number",{parseInt:o})},256:function(t,e,n){var r=n(9).parseInt,o=n(245).trim,c=n(246),l=/^[-+]?0[xX]/;t.exports=8!==r(c+"08")||22!==r(c+"0x16")?function(t,e){var n=o(String(t),3);return r(n,e>>>0||(l.test(n)?16:10))}:r},296:function(t,e,n){},325:function(t,e,n){"use strict";var r=n(296);n.n(r).a},351:function(t,e,n){"use strict";n.r(e);n(84);var r=n(234),o=(n(251),n(255),n(36),n(30),n(81),n(52)),c=(n(61),n(44),n(102)),l=n(244),d=n(274),h=n(62),f=n(238),m=n(236),v=n(241),I=n(235),L={components:{NavBar:c.a,GoodsList:l.a,FilterPage:d.a},data:function(){return{swipeImgs:[],ironpotTab:0,goodsList:[],sortType:"last",selectParams:"",loading:!1,isAllLoaded:!1,pageIndex:0,pageSize:8,classParams:[],orderBy:1,isInitLoad:!1,filterParams:[],isLoading:!1}},head:function(){return{title:"铁壶",meta:[{name:"keywords",hid:"keywords",content:""},{name:"description",hid:"description",content:""}]}},watch:{$route:function(t){"shop-ironpot-type"!==t.name||this.$store.state.isFromDetail||this.initData()}},asyncData:function(t){var e,n,r,c,l,d,h,m,I,L,x;return regeneratorRuntime.async((function(y){for(;;)switch(y.prev=y.next){case 0:t.$axios,e=t.error,n=t.params,y.prev=1,y.next=19;break;case 5:if(r=y.sent,c=Object(o.a)(r,4),l=c[0],d=c[1],h=c[2],m=c[3],1!==l.Code||1!==d.Code||1!==m.Code){y.next=18;break}return I=d.Data,L=m.Data,x=Object(f.d)(l.Data.Data,v.a),y.abrupt("return",{filterParams:L,classParams:I,goodsList:x,isAllLoaded:x.length<8,ironpotTab:Number.parseInt(n.type),pageIndex:1,isInitLoad:!0,swipeImgs:Object(f.a)(h)});case 18:return y.abrupt("return",e({statusCode:500}));case 19:y.next=30;break;case 21:if(y.prev=21,y.t0=y.catch(1),void 0!==y.t0.response){y.next=27;break}return y.abrupt("return",e({statusCode:500}));case 27:if(404===y.t0.response.status){y.next=29;break}return y.abrupt("return",e({statusCode:500}));case 29:return y.abrupt("return",e({statusCode:404}));case 30:case"end":return y.stop()}}),null,null,[[1,21]])},methods:{sortBy:function(t){this.orderBy!==t&&(this.orderBy=t,this.isAllLoaded=!1,this.pageIndex=1,this.getData())},loaderMore:function(){this.$store.state.is2Detail||!this.isInitLoad||this.isLoading||(this.pageIndex++,this.getData())},getData:function(){var t=this;try{if(this.isAllLoaded)return;this.$toast.loading({duration:0,message:"加载中...",forbidClick:!0}),this.isLoading=!0,this.$axios.$get("".concat(I.a.GET_GOODS_LIST,"/").concat(this.ironpotTab,"?type=").concat(m.b.TH,"&pageIndex=").concat(this.pageIndex,"&pageSize=").concat(this.pageSize,"&orderBy=").concat(this.orderBy).concat(this.selectParams)).then((function(e){1===e.Code?(t.isAllLoaded=e.Data.Data.length<t.pageSize,1===t.pageIndex?t.goodsList=Object(f.d)(e.Data.Data,v.a):t.goodsList=[].concat(Object(r.a)(that.goodsList),Object(r.a)(Object(f.d)(e.Data.Data,v.a))),t.$toast.clear(),t.loading=!1,t.isLoading=!1):(t.$toast.fail(e.Message),t.loading=!1,t.isLoading=!1)}))}catch(t){this.$toast.fail("系统错误，请稍后再试..."),this.isLoading=!1}},changeTab:function(t){this.isAllLoaded=!1,this.pageIndex=1,this.goodsList=[],this.getData()},initData:function(){var t=this;try{this.$toast.loading({duration:0,message:"加载中...",forbidClick:!0}),this.isLoading=!0;var e=this.$route.fullPath.replace(this.$route.path,"").replace("?","");this.selectParams=""===e?"":"&"+e,this.pageIndex=1,Promise.all([this.$axios.$get("".concat(I.a.GET_GOODS_LIST,"/").concat(this.ironpotTab,"?type=").concat(m.b.TH,"&pageIndex=").concat(this.pageIndex,"&pageSize=").concat(this.pageSize,"&orderBy=").concat(this.orderBy).concat(this.selectParams)),this.$axios.$get("".concat(I.a.GET_CLASS_TYPE,"?type=").concat(m.b.TH)),this.$axios.$get("".concat(I.a.GET_BANNER,"?type=").concat(m.a.TH)),this.$axios.$get("".concat(I.a.GET_CLASS_TYPE_FILTERATE,"?type=").concat(m.b.TH))]).then((function(e){var n=Object(o.a)(e,4),r=n[0],c=n[1],l=n[2],d=n[3];1===r.Code&&1===c.Code&&1===d.Code?(t.goodsList=Object(f.d)(r.Data.Data,v.a),t.classParams=c.Data,t.swipeImgs=Object(f.a)(l),t.filterParams=d.Data,t.$toast.clear(),t.isInitLoad=!0,t.loading=!1,t.isAllLoaded=r.Data.Data.length<t.pageSize,t.pageIndex=1,t.isLoading=!1):(t.$toast.fail(filterData.Message||r.Message),t.loading=!1,t.isLoading=!1)}))}catch(t){this.$toast.fail("系统错误，请稍后再试..."),this.isLoading=!1}},openFilter:function(){h.a.$emit(this.$route.name+"openFilter",!0)},initFilter:function(){var t=this;try{this.$toast.loading({duration:0,message:"加载中...",forbidClick:!0});var e=this.$route.fullPath.replace(this.$route.path,"").replace("?","");this.selectParams=""===e?"":"&"+e,this.pageIndex=1,this.orderBy=1,this.$axios.$get("".concat(I.a.GET_CLASS_TYPE_FILTERATE,"?type=").concat(m.b.TH)).then((function(e){1===e.Code?(t.filterParams=e.Data,t.$toast.clear()):t.$toast.fail(filterData.Message||goodsResult.Message)}))}catch(t){this.$toast.fail("系统错误，请稍后再试...")}}},created:function(){var t=this;h.a.$on("getFilterParams",(function(e){t.isInitLoad=!1,t.isAllLoaded=!1,t.pageIndex=1,t.selectParams="",e.forEach((function(e){if(e.selectList.length>0){var n="";e.selectList.forEach((function(t){return n+=t+","})),t.selectParams+="".concat(e.strParam,"=").concat(n.substring(0,n.length-1),"&")}})),""!==t.selectParams&&(t.selectParams="&"+t.selectParams.substring(0,t.selectParams.length-1)),t.getData()}))},mounted:function(){var t=this;this.$nextTick((function(){t.ironpotTab=Number.parseInt(t.$route.params.type),t.$store.state.isFirstBrowser?t.$store.commit("IS_FIRST_BROWSER",!1):(t.initData(),t.initFilter())}))}},x=(n(325),n(10)),component=Object(x.a)(L,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"container"},[n("nav-bar",{attrs:{title:"日本铁壶"}}),t._v(" "),n("van-swipe",{attrs:{autoplay:3e3,"indicator-color":"#F02A0C"}},t._l(t.swipeImgs,(function(t,e){return n("van-swipe-item",{key:e},[n("a",{attrs:{href:t.ImgHyperlink}},[n("img",{staticStyle:{width:"100%"},attrs:{src:t.Banner,alt:""}})])])})),1),t._v(" "),n("van-sticky",[n("van-tabs",{attrs:{color:"#dd801a","title-inactive-color":"#666",background:"#fff","swipe-threshold":3},on:{change:t.changeTab},model:{value:t.ironpotTab,callback:function(e){t.ironpotTab=e},expression:"ironpotTab"}},t._l(t.classParams,(function(t,e){return n("van-tab",{key:"class"+e,attrs:{name:t.ID,title:t.Name}})})),1),t._v(" "),n("div",{staticClass:"sort_container"},[n("ul",[n("li",{class:{active:1===t.orderBy},on:{click:function(e){return t.sortBy(1)}}},[n("span",[t._v("最新")])]),t._v(" "),n("li",{class:{active:2===t.orderBy},on:{click:function(e){return t.sortBy(2)}}},[n("span",[t._v("人气")])]),t._v(" "),n("li",{class:{active:""!==t.selectParams},staticStyle:{"border-left":"solid 1px #eee"},on:{click:t.openFilter}},[n("span",[t._v("筛选")]),t._v(" "),n("svg",{staticClass:"icon icon-shaixuan",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-shaixuan"}})])])])])],1),t._v(" "),n("filter-page",{attrs:{filterParams:t.filterParams}}),t._v(" "),n("van-list",{attrs:{finished:t.isAllLoaded,"finished-text":"没有更多了"},on:{load:t.loaderMore},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[n("goods-list",{attrs:{goodsList:t.goodsList}})],1)],1)}),[],!1,null,"fe49c9b6",null);e.default=component.exports}}]);
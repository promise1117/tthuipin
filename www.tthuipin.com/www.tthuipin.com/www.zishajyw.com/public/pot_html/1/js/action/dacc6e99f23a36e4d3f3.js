(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{278:function(t,e,r){},309:function(t,e,r){"use strict";var n=r(278);r.n(n).a},338:function(t,e,r){"use strict";r.r(e);var n=r(234),o=(r(44),r(36),r(30),r(81),r(52)),c=(r(84),r(61),r(102)),l=r(244),d=r(274),h=r(235),f=r(62),m=r(236),v=r(241),$=r(238),y={components:{NavBar:c.a,GoodsList:l.a,FilterPage:d.a},data:function(){return{swipeImgs:[],goodsList:[],sortType:"last",sortPrice:"none",selectParams:"",filterParams:[],orderBy:1,pageIndex:0,pageSize:8,typeId:0,isAllLoaded:!1,loading:!1}},head:function(){return{title:"砂轩紫砂壶商城_紫砂壶商城_宜兴紫砂商城",meta:[{name:"keywords",hid:"keywords",content:"紫砂壶商城,宜兴紫砂壶商城"},{name:"description",hid:"description",content:"砂轩紫砂壶商城,集宜兴紫砂壶名家之代表作品,有宜兴紫砂壶大师/研高/名家等人的作品,也有宜兴紫砂壶后起之秀的作品,欢迎选购,欣赏,收藏."}]}},asyncData:function(t){var e,r,n,c,l,d,f,y,_,L,x;return regeneratorRuntime.async((function(I){for(;;)switch(I.prev=I.next){case 0:return e=t.$axios,r=t.route,t.query,n=t.error,I.prev=1,c=""===(c=r.fullPath.replace(r.path,"").replace("?",""))?"":"&"+c,I.next=7,regeneratorRuntime.awrap(Promise.all([e.$get("".concat(h.a.GET_GOODS_LIST,"/0?type=").concat(m.b.ZISHA,"&pageIndex=1&pageSize=8&orderBy=1").concat(c)),e.$get("".concat(h.a.GET_CLASS_TYPE_FILTERATE,"?type=").concat(m.b.ZISHA)),e.$get("".concat(h.a.GET_BANNER,"?type=").concat(m.a.SC))]));case 7:if(l=I.sent,d=Object(o.a)(l,3),f=d[0],y=d[1],_=d[2],1!==y.Code||1!==f.Code){I.next=18;break}return L=y.Data,x=Object($.d)(f.Data.Data,v.a),I.abrupt("return",{filterParams:L,goodsList:x,isAllLoaded:x.length<8,selectParams:""===c?"":c,pageIndex:1,swipeImgs:Object($.a)(_)});case 18:return I.abrupt("return",n({statusCode:500}));case 19:I.next=30;break;case 21:if(I.prev=21,I.t0=I.catch(1),void 0!==I.t0.response){I.next=27;break}return I.abrupt("return",n({statusCode:500}));case 27:if(404===I.t0.response.status){I.next=29;break}return I.abrupt("return",n({statusCode:500}));case 29:return I.abrupt("return",n({statusCode:404}));case 30:case"end":return I.stop()}}),null,null,[[1,21]])},watch:{$route:function(t){"shop"!==t.name||this.$store.state.isFromDetail||this.initData()}},methods:{sortBy:function(t){this.orderBy!==t&&(this.orderBy=t,this.isAllLoaded=!1,this.pageIndex=1,this.getData())},openFilter:function(){f.a.$emit(this.$route.name+"openFilter",!0)},getData:function(){var t=this;try{if(this.isAllLoaded)return;this.$toast.loading({duration:0,message:"加载中...",forbidClick:!0}),this.isLoading=!0,this.$axios.$get("".concat(h.a.GET_GOODS_LIST,"/0?type=").concat(m.b.ZISHA,"&pageIndex=").concat(this.pageIndex,"&pageSize=").concat(this.pageSize,"&orderBy=").concat(this.orderBy).concat(this.selectParams)).then((function(e){1===e.Code?(t.isAllLoaded=e.Data.Data.length<t.pageSize,1===t.pageIndex?t.goodsList=Object($.d)(e.Data.Data,v.a):t.goodsList=[].concat(Object(n.a)(t.goodsList),Object(n.a)(Object($.d)(e.Data.Data,v.a))),t.$toast.clear(),t.loading=!1,t.isLoading=!1):(t.$toast.fail(e.Message),t.loading=!1,t.isLoading=!1)}))}catch(t){this.$toast.fail("系统错误，请稍后再试..."),this.isLoading=!1}},loaderMore:function(){this.$store.state.is2Detail||this.isLoading||(this.pageIndex++,this.getData())},initData:function(){var t=this;try{this.$toast.loading({duration:0,message:"加载中...",forbidClick:!0});var e=this.$route.fullPath.replace(this.$route.path,"").replace("?","");this.selectParams=""===e?"":"&"+e,this.pageIndex=1,this.orderBy=1,Promise.all([this.$axios.$get("".concat(h.a.GET_GOODS_LIST,"/0?type=").concat(m.b.ZISHA,"&pageIndex=1&pageSize=8&orderBy=1").concat(this.selectParams)),this.$axios.$get("".concat(h.a.GET_CLASS_TYPE_FILTERATE,"?type=").concat(m.b.ZISHA)),this.$axios.$get("".concat(h.a.GET_BANNER,"?type=").concat(m.a.SC))]).then((function(e){var r=Object(o.a)(e,3),n=r[0],c=r[1],l=r[2];if(1===c.Code&&1===n.Code){var d=c.Data,h=Object($.d)(n.Data.Data,v.a);t.isAllLoaded=h.length<t.pageSize,t.filterParams=d,t.goodsList=h,t.bannerResult=Object($.a)(l),t.$toast.clear()}else t.$toast.fail(filterData.Message||n.Message)}))}catch(t){this.$toast.fail("系统错误，请稍后再试...")}},initFilter:function(){var t=this;try{this.$toast.loading({duration:0,message:"加载中...",forbidClick:!0});var e=this.$route.fullPath.replace(this.$route.path,"").replace("?","");this.selectParams=""===e?"":"&"+e,this.pageIndex=1,this.orderBy=1,this.$axios.$get("".concat(h.a.GET_CLASS_TYPE_FILTERATE,"?type=").concat(m.b.ZISHA)).then((function(e){1===e.Code?(t.filterParams=e.Data,t.$toast.clear()):t.$toast.fail(filterData.Message||goodsResult.Message)}))}catch(t){this.$toast.fail("系统错误，请稍后再试...")}}},created:function(){var t=this;f.a.$on("getFilterParams",(function(e){t.isInitLoad=!1,t.isAllLoaded=!1,t.pageIndex=1,t.selectParams="",e.forEach((function(e){if(e.selectList.length>0){var r="";e.selectList.forEach((function(t){return r+=t+","})),t.selectParams+="".concat(e.strParam,"=").concat(r.substring(0,r.length-1),"&")}})),""!==t.selectParams&&(t.selectParams="&"+t.selectParams.substring(0,t.selectParams.length-1)),t.getData()}))},mounted:function(){var t=this;this.$nextTick((function(){t.$store.state.isFirstBrowser?t.$store.commit("IS_FIRST_BROWSER",!1):t.initFilter()}))}},_=(r(309),r(10)),component=Object(_.a)(y,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"container"},[r("nav-bar",{attrs:{title:"紫砂商城"}}),t._v(" "),r("van-swipe",{attrs:{autoplay:3e3,"indicator-color":"#F02A0C","stop-propagation":!1}},t._l(t.swipeImgs,(function(t,e){return r("van-swipe-item",{key:e},[r("a",{attrs:{href:t.ImgHyperlink}},[r("img",{staticStyle:{width:"100%"},attrs:{src:t.Banner,alt:""}})])])})),1),t._v(" "),r("van-sticky",[r("div",{staticClass:"sort_container"},[r("ul",[r("li",{class:{active:1===t.orderBy},on:{click:function(e){return t.sortBy(1)}}},[r("span",[t._v("最新")])]),t._v(" "),r("li",{class:{active:2===t.orderBy},on:{click:function(e){return t.sortBy(2)}}},[r("span",[t._v("人气")])]),t._v(" "),r("li",{class:{active:""!==t.selectParams},staticStyle:{"border-left":"solid 1px #eee"},on:{click:t.openFilter}},[r("span",[t._v("筛选")]),t._v(" "),r("svg",{staticClass:"icon icon-shaixuan",attrs:{"aria-hidden":"true"}},[r("use",{attrs:{"xlink:href":"#icon-shaixuan"}})])])])])]),t._v(" "),r("filter-page",{attrs:{filterParams:t.filterParams}}),t._v(" "),r("van-list",{attrs:{finished:t.isAllLoaded,"finished-text":"没有更多了"},on:{load:t.loaderMore},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[r("goods-list",{attrs:{goodsList:t.goodsList}})],1)],1)}),[],!1,null,"6fc7e12e",null);e.default=component.exports}}]);